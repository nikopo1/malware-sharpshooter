CC=g++
CFLAGS=-Wall -g -O3

build: main

main: vertex.o graph.o scdecoder.o graphbuilder.o malspec.o main.o
	$(CC) $(CFLAGS) $^ -o $@  -lpugixml -lrt -L.

main.o: main.cpp
	$(CC) $(CFLAGS) -c $^ -o $@

malspec.o: malspec.cpp
	$(CC) $(CFLAGS) -c $^ -o $@

graph.o: graph.cpp
	$(CC) $(CFLAGS) -c $^ -o $@

vertex.o: vertex.cpp
	$(CC) $(CFLAGS) -c $^ -o $@

scdecoder.o: scdecoder.cpp
	$(CC) $(CFLAGS) -c $^ -o $@

graphbuilder.o: graphbuilder.cpp
	$(CC) $(CFLAGS) -c $^ -o $@

clean:
	rm -rf *.o main test.txt
